<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ  æ™ºæ…§é±¼ç¼¸å¥åº·ä¸­å¿ƒ</title>
    <style>
        /* CSS æ ·å¼ï¼šå®šä¹‰é¡µé¢çš„å¸ƒå±€å’Œç¾è§‚åº¦ */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f7f6;
            margin: 0;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: #fff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #007bff;
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }

        .dashboard {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
        }

        .section {
            padding: 20px;
            border-radius: 8px;
            background-color: #f9f9f9;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
        }

        .tds-display, .fish-list {
            text-align: center;
        }

        .status-box {
            padding: 15px;
            border-radius: 6px;
            font-size: 1.2em;
            font-weight: bold;
            margin-top: 10px;
        }
        
        /* çŠ¶æ€é¢œè‰²å®šä¹‰ */
        .status-è‰¯å¥½ { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .status-é€‚ä¸­ { background-color: #fff3cd; color: #856404; border: 1px solid #ffeeba; }
        .status-æ¶åŠ£ { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }

        .fish-list ul {
            list-style: none;
            padding: 0;
        }

        .fish-list li {
            padding: 8px 0;
            border-bottom: 1px dashed #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .health-tag {
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.9em;
            font-weight: normal;
        }

        /* å¥åº·åº¦é¢œè‰²å®šä¹‰ */
        .health-tag.å¥åº· { background-color: #28a745; color: white; }
        .health-tag.å¿«gäº† { background-color: #ffc107; color: #343a40; }
        .health-tag.gäº† { background-color: #dc3545; color: white; }

        .fish-view img {
            width: 100%;
            height: 400px;
            object-fit: cover;
            border-radius: 8px;
            display: block;
            margin-top: 15px;
        }

        /* æ¨¡æ‹Ÿåç«¯æ•°æ® */
        .backend-data {
            margin-top: 20px;
            padding: 15px;
            background: #e9ecef;
            border-radius: 6px;
            font-size: 0.8em;
            text-align: left;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ  æ™ºæ…§é±¼ç¼¸å¥åº·ç›‘æ§ä¸­å¿ƒ</h1>
    
    <div class="dashboard">
        <div class="section status-section">
            <h2>ğŸ’§ æ°´è´¨å¥åº·åº¦æŠ¥å‘Š</h2>
            <div class="tds-display">
                <p>å½“å‰ TDS å€¼: <strong id="tds-value">--</strong> PPM</p>
                <div id="water-status" class="status-box">åŠ è½½ä¸­...</div>
            </div>

            <h2 style="margin-top: 30px;">ğŸŸ é±¼ç±»å¥åº·è¿½è¸ªï¼ˆå…± <span id="fish-count">--</span> æ¡ï¼‰</h2>
            <div class="fish-list">
                <ul id="fish-health-list">
                    </ul>
            </div>
            
            <div class="backend-data">
                <p>ğŸ’¡ **æ•°æ®è¯´æ˜ï¼š**</p>
                <p>TDS å€¼ (PPM) â†’ æ¶åŠ£(>400) | é€‚ä¸­(200~400) | è‰¯å¥½(<200)</p>
                <p>æ•°æ®æ¯ 5 ç§’è‡ªåŠ¨æ›´æ–°ä¸€æ¬¡ï¼ˆæ¨¡æ‹Ÿåç«¯æ¨é€ï¼‰</p>
            </div>
        </div>

        <div class="section fish-view">
            <h2>ğŸ“¸ è‡ªåŠ¨é‡‡é›†ä¼˜ç¾é±¼æ™¯</h2>
            <p>åç«¯AIæ•æ‰çš„å½“å‰æœ€ä½³ç”»é¢ï¼š</p>
            <img id="aquarium-image" src="https://via.placeholder.com/600x400?text=Fish+View+Loading..." alt="é±¼ç¼¸å®æ—¶ç¾æ™¯">
        </div>

    </div>
</div>

<script>
    // JavaScript è„šæœ¬ï¼šå¤„ç†æ•°æ®å’Œé¡µé¢äº¤äº’

    // 1. æ¨¡æ‹Ÿåç«¯æ•°æ®
    // å‡è®¾åç«¯ä¼šè¿”å›ä»¥ä¸‹ç»“æ„çš„æ•°æ®
    function mockBackendData() {
        // éšæœºç”Ÿæˆ TDS å€¼ (0 - 500)
        const tds = Math.floor(Math.random() * 500);

        // æ¨¡æ‹Ÿé±¼ç±»æ£€æµ‹ç»“æœ
        const fishData = [
            { id: 1, name: "å­”é›€é±¼ A", health: ["å¥åº·", "å¿«gäº†", "gäº†"][Math.floor(Math.random() * 3)] },
            { id: 2, name: "çº¢ç»¿ç¯ B", health: ["å¥åº·", "å¿«gäº†"][Math.floor(Math.random() * 2)] },
            { id: 3, name: "é‡‘é±¼ C", health: "å¥åº·" },
            { id: 4, name: "ç¥ä»™é±¼ D", health: ["å¥åº·", "gäº†"][Math.floor(Math.random() * 2)] }
        ];

        // æ¨¡æ‹Ÿé±¼æ™¯å›¾ç‰‡ï¼ˆå®é™…åº”ç”¨ä¸­è¿™é‡Œæ˜¯åç«¯è§†é¢‘æµæˆªå›¾ï¼‰
        const imageId = Math.floor(Math.random() * 5); // éšæœºæ¢å›¾
        const imageUrl = `https://picsum.photos/600/400?random=${imageId}`;

        return { tds, fishData, imageUrl };
    }

    // 2. æ ¹æ® TDS å€¼åˆ¤æ–­æ°´è´¨ç­‰çº§
    function getWaterQuality(tds) {
        if (tds > 400) {
            return "æ¶åŠ£"; // ä¾‹å¦‚ï¼šTDS > 400
        } else if (tds >= 200) {
            return "é€‚ä¸­"; // ä¾‹å¦‚ï¼š200 <= TDS <= 400
        } else {
            return "è‰¯å¥½"; // ä¾‹å¦‚ï¼šTDS < 200
        }
    }

    // 3. æ›´æ–°é¡µé¢æ˜¾ç¤º
    function updateDashboard() {
        const data = mockBackendData();
        
        // --- 1. æ›´æ–° TDS æ°´è´¨ ---
        const tdsValueEl = document.getElementById('tds-value');
        const waterStatusEl = document.getElementById('water-status');
        const status = getWaterQuality(data.tds);

        tdsValueEl.textContent = data.tds;
        waterStatusEl.textContent = `æ°´è´¨çŠ¶æ€: ${status}`;
        
        // åŠ¨æ€æ·»åŠ /ç§»é™¤ CSS ç±»æ¥æ”¹å˜é¢œè‰²
        waterStatusEl.className = 'status-box status-' + status;

        // --- 2. æ›´æ–°é±¼ç±»å¥åº·åº¦ ---
        const fishCountEl = document.getElementById('fish-count');
        const fishListEl = document.getElementById('fish-health-list');
        
        fishCountEl.textContent = data.fishData.length;
        fishListEl.innerHTML = ''; // æ¸…ç©ºç°æœ‰åˆ—è¡¨

        data.fishData.forEach(fish => {
            const li = document.createElement('li');
            li.innerHTML = `
                <span>${fish.name} (${fish.id})</span>
                <span class="health-tag ${fish.health}">${fish.health}</span>
            `;
            fishListEl.appendChild(li);
        });

        // --- 3. æ›´æ–°ä¼˜ç¾é±¼æ™¯ ---
        document.getElementById('aquarium-image').src = data.imageUrl;
    }

    // 4. åˆå§‹åŒ–å’Œå®šæ—¶åˆ·æ–° (æ¨¡æ‹Ÿåç«¯æ¨é€)
    // ç¬¬ä¸€æ¬¡åŠ è½½
    updateDashboard(); 
    // æ¯ 5 ç§’åˆ·æ–°ä¸€æ¬¡
    setInterval(updateDashboard, 5000); 

</script>
</body>
</html>